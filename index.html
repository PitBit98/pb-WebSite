<script>
        // JavaScript per il conteggio dei giorni
        const startDate = new Date('2024-10-10');
        const counterElement = document.getElementById('counter');

        function calculateDaysPassed() {
            const currentDate = new Date();
            const timeDifference = currentDate - startDate;
            const daysPassed = Math.floor(timeDifference / (1000 * 60 * 60 * 24));
            return daysPassed;
        }

        function animateCounter(targetValue) {
            let currentValue = 0;
            const interval = setInterval(() => {
                if (currentValue < targetValue) {
                    currentValue++;
                    counterElement.textContent = currentValue;
                } else {
                    clearInterval(interval);
                }
            }, 20);
        }

        const daysPassed = calculateDaysPassed();
        animateCounter(daysPassed);

        // Configurazione di Swiper
        const swiper = new Swiper('.swiper-container', {
            loop: true,
            slidesPerView: 1,
            spaceBetween: 10,
            pagination: {
                el: '.swiper-pagination',
                clickable: true,
            },
            navigation: {
                nextEl: '.swiper-button-next',
                prevEl: '.swiper-button-prev',
            },
            breakpoints: {
                768: {
                    slidesPerView: 3,
                    spaceBetween: 20,
                },
            },
        });

        // Animazione delle sezioni
        window.addEventListener('scroll', () => {
            document.querySelectorAll('section').forEach(section => {
                const rect = section.getBoundingClientRect();
                if (rect.top < window.innerHeight) {
                    section.classList.add('visible');
                } else {
                    section.classList.remove('visible');
                }
            });
        });

        // Leaflet map integration
        var map = L.map('map').setView([41.8719, 12.5674], 6);

        L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
            attribution: '© <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'
        }).addTo(map);

        // Coordinate delle città
        const cityCoordinates = {
            lecce: [40.3552, 18.1792],
            galatina: [40.1633, 18.1639],
            benevento: [41.1333, 14.7833],
            napoli: [40.8333, 14.2500]
        };

        // Aggiungi i marker (ora con un riferimento per interazione)
        const markers = {};
        markers['lecce'] = L.marker(cityCoordinates['lecce'], {icon: L.divIcon({className: 'my-icon', html: '<div style="background-color: blue; width: 10px; height: 10px; border-radius: 50%;"></div>'})}).addTo(map).bindPopup('Lecce');
        markers['galatina'] = L.marker(cityCoordinates['galatina'], {icon: L.divIcon({className: 'my-icon', html: '<div style="background-color: green; width: 10px; height: 10px; border-radius: 50%;"></div>'})}).addTo(map).bindPopup('Galatina');
        markers['benevento'] = L.marker(cityCoordinates['benevento'], {icon: L.divIcon({className: 'my-icon', html: '<div style="background-color: orange; width: 10px; height: 10px; border-radius: 50%;"></div>'})}).addTo(map).bindPopup('Benevento');
        markers['napoli'] = L.marker(cityCoordinates['napoli'], {icon: L.divIcon({className: 'my-icon', html: '<div style="background-color: red; width: 10px; height: 10px; border-radius: 50%;"></div>'})}).addTo(map).bindPopup('Napoli');

        // Gestione del click sui nomi delle città
        document.querySelectorAll('#luoghi-interattivo p span').forEach(span => {
            span.addEventListener('click', function() {
                const city = this.getAttribute('data-city');
                if (cityCoordinates[city]) {
                    map.setView(cityCoordinates[city], 10); // Centra la mappa sulla città con uno zoom di 10

                    // Nascondi tutte le sezioni di informazioni sulle città
                    document.querySelectorAll('.city-info').forEach(info => {
                        info.style.display = 'none';
                    });

                    // Mostra la sezione di informazioni per la città selezionata
                    const cityInfoDiv = document.getElementById(city + '-info');
                    if (cityInfoDiv) {
                        cityInfoDiv.style.display = 'block';
                    }
                }
            });
        });
    </script>
